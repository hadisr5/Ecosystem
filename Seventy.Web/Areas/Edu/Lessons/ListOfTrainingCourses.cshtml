
@{
    ViewBag.Title = "لیست دورهای آموزشی ";
    Layout = "~/Areas/Edu/Shared/_Layout.cshtml";
}
@section Styles{
    <link rel="stylesheet" type="text/css" href="/app-assets/vendors/css/tables/datatable/datatables.min.css">
    <link rel="stylesheet" type="text/css" href="/app-assets/css-rtl/plugins/pickers/persianDatepicker-master/css/persianDatepicker-default.css" />

}


@{
    await Html.RenderPartialAsync("~/Areas/Edu/Shared/PartialLoading.cshtml");
}

<section id="List"></section>

@section Scripts{

    <script src="/app-assets/vendors/js/tables/datatable/datatables.min.js" type="text/javascript"></script>
    <script src="/app-assets/vendors/js/forms/select/select2.full.min.js" type="text/javascript"></script>
    <script src="/app-assets/js/scripts/forms/select/form-select2.min.js" type="text/javascript"></script>
    <script src="/app-assets/vendors/js/pagination/jquery.twbsPagination.min.js" type="text/javascript"></script>
    <script src="/app-assets/js/scripts/pagination/pagination.js" type="text/javascript"></script>

    <script>
        var currentPage = 1;
        var totalPage = 0;
        $(document).ready(function () {
            LoadPage(currentPage);
        });

        function LoadPage(id) {
            var p = $("#PageBtn_" + id);
            p.removeClass("hidden");

            $('#List').load("/Edu/Lessons/ListTrainingCourse", { page: id },
                function (responseTxt, statusTxt, xhr) {
                    $(".wating").hide();
                    if (statusTxt === "success") {
                        totalPage = parseInt($("#TotalPage").val());
                        p.addClass("hidden");
                    }
                });
        }

        function NextPage() {
            if (currentPage < totalPage) {
                currentPage += 1;
                LoadPage(currentPage);
            }
        }

        function PrevPage() {
            if (currentPage > 1) {
                currentPage -= 1;
                LoadPage(currentPage);
            }
        }

        function Delete(id) {
            swal({
                title: 'جهت حذف این اطلاعات مطمئن هستید؟',
                text: 'شما نمی توانید این را برگردانید!',
                type: 'warning',
                showCancelButton: true,
                confirmButtonColor: '#3085d6',
                cancelButtonColor: '#d33',
                confirmButtonText: 'بله ، آن را حذف میکنم!',
                cancelButtonText: 'منصرف شدم'
            }).then((result) => {
                if (result.value) {
                    doDelete(id);
                }
            });
        }

        function doDelete(id) {
            $.ajax({
                type: "POST",
                url: "/Edu/Lessons/Remove",
                data: {
                    ID: id
                },
                success: function (data) {
                    if (data === "done") {
                        $("#Row_" + id).remove();
                        swal("انجام شد", data.statusText, "success");
                    }
                    else {
                        swal("خطا", data.statusText, "error");
                    }
                }, error: function (data) {
                    swal("خطا", data.statusText, "error");
                }
            });
        }
    </script>
}